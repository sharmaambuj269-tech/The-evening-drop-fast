<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Momo Ordering System</title>
    <style>
        .menu-item {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .quantity-btn {
            padding: 5px 10px;
            margin: 0 5px;
            cursor: pointer;
        }
        #order-summary, #checkout-form, #payment-section {
            margin: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .contact-info {
            background-color: #f5f5f5;
            padding: 15px;
            margin: 20px;
            border-radius: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="menu-container"></div>
    
    <div id="order-summary">
        <h3>Your Order</h3>
        <div id="order-items"></div>
        <div><strong>Total: ₹<span id="order-total">0</span></strong></div>
    </div>

    <div id="checkout-form">
        <h3>Customer Details</h3>
        <input type="text" id="customer-name" placeholder="Your Name">
        <input type="tel" id="customer-phone" placeholder="Phone Number">
        <button onclick="placeOrder()">Place Order</button>
    </div>

    <div id="payment-section" style="display: none;">
        <h3>Payment Details</h3>
        <p>Payable Amount: ₹<span id="payable-amount">0</span></p>
        <a id="payment-link" href="#" target="_blank">Pay via UPI</a>
        <p><strong>UPI ID: 7428733852-2@ybl</strong></p>
    </div>

    <div class="contact-info">
        <h3>Contact Information</h3>
        <p>Customer Support: 8595071599</p>
        <p>Restaurant: 7428733852</p>
        <p>UPI ID: 7428733852-2@ybl</p>
    </div>

<script>
// Sample menu data
const menu = [
    { id: 1, name: "Steam Momo", price: 60, description: "Healthy steamed momos" },
    { id: 2, name: "Fried Momo", price: 80, description: "Crispy fried momos" },
    { id: 3, name: "Chilli Momo", price: 100, description: "Spicy chilli momos" }
];

let cart = [];
const menuContainer = document.getElementById('menu-container');

// Display menu items
menu.forEach(item => {
    const menuItemElement = document.createElement('div');
    menuItemElement.className = 'menu-item';
    menuItemElement.innerHTML = `
        <div>
            <strong>${item.name}</strong> - ₹${item.price} 
            <div>${item.description}</div>
        </div>
        <div>
            <button class="quantity-btn" onclick="changeQuantity(${item.id}, -1)">-</button>
            <span id="qty-${item.id}">0</span>
            <button class="quantity-btn" onclick="changeQuantity(${item.id}, 1)">+</button>
        </div>
    `;
    menuContainer.appendChild(menuItemElement);
});

function changeQuantity(itemId, change) {
    const currentQty = cart.find(item => item.id === itemId)?.quantity || 0;
    const newQty = Math.max(0, currentQty + change);

    // Update cart
    const existingItemIndex = cart.findIndex(item => item.id === itemId);
    if (existingItemIndex > -1) {
        if (newQty === 0) {
            cart.splice(existingItemIndex, 1);
        } else {
            cart[existingItemIndex].quantity = newQty;
        }
    } else if (newQty > 0) {
        const menuItem = menu.find(item => item.id === itemId);
        cart.push({ 
            id: itemId, 
            quantity: newQty,
            name: menuItem.name,
            price: menuItem.price
        });
    }

    // Update UI
    document.getElementById(`qty-${itemId}`).textContent = newQty;
    updateOrderSummary();
}

function updateOrderSummary() {
    const orderItemsContainer = document.getElementById('order-items');
    let total = 0;
    orderItemsContainer.innerHTML = '';
    
    cart.forEach(cartItem => {
        const itemTotal = cartItem.price * cartItem.quantity;
        total += itemTotal;
        const itemElement = document.createElement('div');
        itemElement.textContent = `${cartItem.name} x ${cartItem.quantity} = ₹${itemTotal}`;
        orderItemsContainer.appendChild(itemElement);
    });
    
    document.getElementById('order-total').textContent = total;
}

async function placeOrder() {
    const customerName = document.getElementById('customer-name').value;
    const customerPhone = document.getElementById('customer-phone').value;

    if (!customerName || !customerPhone) {
        alert("Kripya apna naam aur phone number dalen.");
        return;
    }

    if (cart.length === 0) {
        alert("Aapka cart khali hai. Kuch momos add karen!");
        return;
    }

    try {
        // Calculate total amount
        const totalAmount = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
        
        // Create UPI payment link
        const upiLink = `upi://pay?pa=7428733852-2@ybl&pn=Restaurant&am=${totalAmount}&cu=INR`;
        
        // Show payment section
        document.getElementById('payable-amount').textContent = totalAmount;
        const paymentLinkElement = document.getElementById('payment-link');
        paymentLinkElement.href = upiLink;
        paymentLinkElement.textContent = `₹${totalAmount} UPI Se Pay Karen`;

        document.getElementById('payment-section').style.display = 'block';
        document.getElementById('checkout-form').style.display = 'none';

        // Optional: Send order details to server
        await saveOrderToServer(customerName, customerPhone, totalAmount);

        alert(`Order successful! Payment complete karen. Order ID: ${generateOrderId()}`);

    } catch (error) {
        alert("Order place nahi ho paya. Phir try karen.");
        console.error("Order error:", error);
    }
}

function generateOrderId() {
    return 'ORD' + Date.now();
}

async function saveOrderToServer(customerName, customerPhone, totalAmount) {
    // यहाँ आप अपने server API call add कर सकते हैं
    const orderData = {
        orderId: generateOrderId(),
        customerName,
        customerPhone,
        items: cart,
        totalAmount,
        timestamp: new Date().toISOString()
    };
    
    console.log("Order Details:", orderData);
    
    // Example API call (uncomment when you have backend)
    /*
    const response = await fetch('/api/orders', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(orderData)
    });
    
    return await response.json();
    */
}
</script>
</body>
</html>
